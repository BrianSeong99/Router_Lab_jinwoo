sudo ip netns add net0 # 创建名为 "net0" 的 namespace
sudo ip netns add net1
sudo ip link add veth-net0 type veth peer name veth-net1 # 创建一对相互连接的 veth pair
sudo ip link set veth-net0 netns net0 # 将 veth 一侧加入到一个 namespace 中
sudo ip link set veth-net1 netns net1 # 配置 veth 另一侧
sudo ip netns exec net0 ip link set veth-net0 up
sudo ip netns exec net0 ip addr add 10.1.1.1/24 dev veth-net0 # 给 veth 一侧配上 ip 地址
sudo ip netns exec net1 ip link set veth-net1 up
sudo ip netns exec net1 ip addr add 10.1.1.2/24 dev veth-net1

ping test:
sudo ip netns exec net0 ping 10.1.1.2