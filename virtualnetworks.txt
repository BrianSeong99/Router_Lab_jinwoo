sudo ip netns add net0 # 创建名为 "net0" 的 namespace
sudo ip netns add net1
sudo ip link add veth-net0 type veth peer name veth-net1 # 创建一对相互连接的 veth pair
sudo ip link set veth-net0 netns net0 # 将 veth 一侧加入到一个 namespace 中
sudo ip link set veth-net1 netns net1 # 配置 veth 另一侧
sudo ip netns exec net0 ip link set veth-net0 up
sudo ip netns exec net0 ip addr add 10.1.1.1/24 dev veth-net0 # 给 veth 一侧配上 ip 地址
sudo ip netns exec net1 ip link set veth-net1 up
sudo ip netns exec net1 ip addr add 10.1.1.2/24 dev veth-net1

ping test:
sudo ip netns exec net0 ping 10.1.1.2

bash:
sudo ip netns exec net0 bash

mkdir build
cd build
cmake .. -DBACKEND=Linux  # cmake .. -DHAL_PLATFORM_TESTING=Linux
make router_hal
make shell
cd Example
sudo ./shell

setup 5 links (PC-R-R-R-PC):
sudo ip netns add net0
sudo ip netns add net1
sudo ip netns add net2
sudo ip netns add net3
sudo ip netns add net4
sudo ip link add veth-net0 type veth peer name veth-net1-1
sudo ip link add veth-net1-2 type veth peer name veth-net2-1
sudo ip link add veth-net2-2 type veth peer name veth-net3-1
sudo ip link add veth-net3-2 type veth peer name veth-net4
sudo ip link set veth-net0 netns net0
sudo ip link set veth-net1-1 netns net1
sudo ip link set veth-net1-2 netns net1
sudo ip link set veth-net2-1 netns net2
sudo ip link set veth-net2-2 netns net2
sudo ip link set veth-net3-1 netns net3
sudo ip link set veth-net3-2 netns net3
sudo ip link set veth-net4 netns net4
sudo ip netns exec net0 ip link set veth-net0 up
sudo ip netns exec net1 ip link set veth-net1-1 up
sudo ip netns exec net1 ip link set veth-net1-2 up
sudo ip netns exec net2 ip link set veth-net2-1 up
sudo ip netns exec net2 ip link set veth-net2-2 up
sudo ip netns exec net3 ip link set veth-net3-1 up
sudo ip netns exec net3 ip link set veth-net3-2 up
sudo ip netns exec net4 ip link set veth-net4 up
sudo ip netns exec net0 ip addr add 10.1.1.1/24 dev veth-net0
sudo ip netns exec net1 ip addr add 10.1.1.2/24 dev veth-net1-1
sudo ip netns exec net1 ip addr add 10.1.1.3/24 dev veth-net1-2
sudo ip netns exec net2 ip addr add 10.1.1.4/24 dev veth-net2-1
sudo ip netns exec net2 ip addr add 10.1.1.5/24 dev veth-net2-2
sudo ip netns exec net3 ip addr add 10.1.1.6/24 dev veth-net3-1
sudo ip netns exec net3 ip addr add 10.1.1.7/24 dev veth-net3-2
sudo ip netns exec net4 ip addr add 10.1.1.8/24 dev veth-net4